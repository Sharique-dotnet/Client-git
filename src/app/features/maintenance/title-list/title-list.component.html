<div class="title-list-container">
  <!-- Header Section -->
  <div class="header">
    <h2>Title List</h2>
    <button class="btn-add" (click)="onAdd()">
      <i class="fas fa-plus"></i>
      Add Title
    </button>
  </div>

  <!-- Search + Page Size -->
  <div class="search-section">
    <div class="search-box">
      <i class="fas fa-search"></i>
      <input
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearch()"
        placeholder="Search titles..."
        class="search-input"
      />
    </div>

    <div class="page-size">
      <label for="pageSize">Page size</label>
      <select id="pageSize" [ngModel]="pageSize" (ngModelChange)="onPageSizeChange($event)">
        <option *ngFor="let opt of pageSizeOptions" [ngValue]="opt">{{ opt }}</option>
      </select>
    </div>
  </div>

  <!-- Error -->
  <div *ngIf="error" class="error-msg">{{ error }}</div>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading-spinner">
    <i class="fas fa-spinner fa-spin"></i>
    <span>Loading...</span>
  </div>

  <!-- Table Section -->
  <div *ngIf="!loading" class="table-container">
    <table class="data-table">
      <thead>
        <tr>
          <th>Title Name</th>
          <th class="actions-column">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let title of filteredTitles">
          <td>{{ title.name }}</td>
          <td class="actions-column">
            <button class="btn-icon btn-edit" (click)="onEdit(title)" title="Edit">
              <i class="fas fa-edit"></i>
            </button>
            <button class="btn-icon btn-delete" (click)="onDelete(title)" title="Delete">
              <i class="fas fa-trash"></i>
            </button>
          </td>
        </tr>
        <tr *ngIf="filteredTitles.length === 0">
          <td colspan="2" class="no-data">
            <i class="fas fa-inbox"></i>
            <p>No titles found</p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination Section (0-based currentPage internally, 1-based display) -->
  <div *ngIf="!loading && totalPages > 1" class="pagination">
    <button class="btn-page" [disabled]="currentPage === 0" (click)="previousPage()">
      <i class="fas fa-chevron-left"></i>
      Previous
    </button>

    <div class="page-numbers">
      <button
        *ngFor="let page of getPaginationPages()"
        class="btn-page-number"
        [class.active]="page === (currentPage + 1)"
        (click)="goToPage(page)"
      >
        {{ page }}
      </button>
    </div>

    <button class="btn-page" [disabled]="(currentPage + 1) === totalPages" (click)="nextPage()">
      Next
      <i class="fas fa-chevron-right"></i>
    </button>
  </div>

  <!-- Footer Info -->
  <div *ngIf="!loading" class="footer-info">
    <span>Showing {{ filteredTitles.length }} of {{ totalItems }} titles</span>
  </div>
</div>
